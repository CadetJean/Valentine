<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Halle ‚ù§Ô∏è</title>
    <style>
        body {
            background-color: #fff0f5;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            overflow: hidden;
        }

        .card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            border: 4px solid #ff85a2;
            box-shadow: 0 10px 25px rgba(255, 133, 162, 0.3);
            z-index: 10;
            position: relative;
            max-width: 600px;
        }

        .bg-heart {
            position: absolute;
            color: rgba(255, 182, 193, 0.4);
            font-size: 20px;
            z-index: 1;
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        h1 { color: #ff4d6d; font-size: 2.2rem; }
        p { color: #ff758f; font-weight: bold; }

        .btn-group {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        button {
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        #yesBtn { background-color: #ff4d6d; color: white; }
        #noBtn { background-color: #ffb3c1; color: white; }

        .confetti {
            position: absolute;
            top: -50px;
            font-size: 24px;
            animation: fall linear forwards;
            user-select: none;
        }

        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }

        .dog-gif {
            width: 220px;
            border-radius: 15px;
            margin-bottom: 10px;
        }

        .calendar-btn {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 24px;
            background-color: #ff4d6d;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(255, 77, 109, 0.3);
        }

        .love-message {
            margin-top: 25px;
            padding: 20px;
            background-color: #ffe6f0;
            border-radius: 15px;
            border: 2px solid #ffb3c1;
            color: #ff4d6d;
            font-size: 0.95rem;
            line-height: 1.6;
            text-align: left;
        }

        .message-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            text-align: center;
            color: #ff4d6d;
        }

        /* Mathematical Heart Animation */
        #heartCanvas {
            margin: 20px auto;
            display: block;
            background-color: #fafafa;
            border-radius: 10px;
        }

        /* Flower Animation Styles */
        .flower {
            position: absolute;
            bottom: 0;
            z-index: 5;
            animation: grow 3s ease-out forwards;
        }

        .stem {
            width: 4px;
            background: linear-gradient(to top, #90EE90, #228B22);
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            height: 0;
            animation: growStem 2s ease-out forwards;
        }

        .flower-head {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) scale(0);
            animation: bloomFlower 1.5s ease-out 2s forwards;
        }

        .petal {
            position: absolute;
            width: 30px;
            height: 40px;
            background: radial-gradient(ellipse at center, #ff85a2, #ff4d6d);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            transform-origin: center bottom;
        }

        .petal:nth-child(1) { transform: rotate(0deg) translateY(-20px); }
        .petal:nth-child(2) { transform: rotate(72deg) translateY(-20px); }
        .petal:nth-child(3) { transform: rotate(144deg) translateY(-20px); }
        .petal:nth-child(4) { transform: rotate(216deg) translateY(-20px); }
        .petal:nth-child(5) { transform: rotate(288deg) translateY(-20px); }

        .center {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .leaf {
            position: absolute;
            width: 25px;
            height: 15px;
            background: #90EE90;
            border-radius: 0 50% 50% 0;
            opacity: 0;
        }

        .leaf-left {
            left: -15px;
            animation: growLeaf 0.8s ease-out 1.5s forwards;
            transform-origin: right center;
        }

        .leaf-right {
            right: -15px;
            animation: growLeaf 0.8s ease-out 1.7s forwards;
            transform-origin: left center;
            transform: scaleX(-1);
        }

        @keyframes growStem {
            from { height: 0; }
            to { height: 150px; }
        }

        @keyframes bloomFlower {
            from { 
                transform: translateX(-50%) scale(0) rotate(0deg);
                bottom: 0;
            }
            to { 
                transform: translateX(-50%) scale(1) rotate(360deg);
                bottom: 150px;
            }
        }

        @keyframes growLeaf {
            from { 
                opacity: 0;
                transform: scaleX(0);
            }
            to { 
                opacity: 1;
                transform: scaleX(1);
            }
        }
    </style>
</head>
<body>

    <div class="card" id="valentineCard">
        <h1>Halle, will you be my Valentine?</h1>
        <canvas id="heartCanvas" width="400" height="350"></canvas>
        <div class="btn-group">
            <button id="yesBtn" onclick="accepted()">YES</button>
            <button id="noBtn" onclick="denied()">NO</button>
        </div>
    </div>

    <script>
        let noClickCount = 0;
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        
        const errorMessages = [
            "Halle, error 404: 'No' not found.",
            "Invalid selection. Please try again.",
            "System Overload: Only 'Yes' is supported.",
            "Critical Error: Clicking 'No' is physically impossible.",
            "Access Denied. Did you mean to click 'Yes'?"
        ];

        // Animated Mathematical Heart with axes
        const canvas = document.getElementById('heartCanvas');
        const ctx = canvas.getContext('2d');
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const scale = 8;
        let t = 0;
        let animationProgress = 0;

        function drawGrid() {
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 0.5;
            
            // Vertical grid lines
            for (let x = 0; x <= canvas.width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // Horizontal grid lines
            for (let y = 0; y <= canvas.height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }

        function drawAxes() {
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(canvas.width, centerY);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.stroke();
            
            // Arrow for X-axis
            ctx.beginPath();
            ctx.moveTo(canvas.width - 10, centerY - 5);
            ctx.lineTo(canvas.width, centerY);
            ctx.lineTo(canvas.width - 10, centerY + 5);
            ctx.stroke();
            
            // Arrow for Y-axis
            ctx.beginPath();
            ctx.moveTo(centerX - 5, 10);
            ctx.lineTo(centerX, 0);
            ctx.lineTo(centerX + 5, 10);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#666';
            ctx.font = '14px Arial';
            ctx.fillText('x', canvas.width - 20, centerY - 10);
            ctx.fillText('y', centerX + 10, 20);
        }

        function drawHeart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid and axes
            drawGrid();
            drawAxes();
            
            // Draw the heart curve progressively
            ctx.beginPath();
            ctx.strokeStyle = `rgba(255, 77, 109, ${0.8 + Math.sin(t * 3) * 0.2})`;
            ctx.lineWidth = 3;
            
            let drawn = false;
            const maxAngle = animationProgress * 2 * Math.PI;
            
            for (let angle = 0; angle <= maxAngle; angle += 0.02) {
                // Parametric heart equations using sin
                const x = 16 * Math.pow(Math.sin(angle), 3);
                const y = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle));
                
                // Scale and translate to center
                const canvasX = centerX + x * scale;
                const canvasY = centerY + y * scale - 20;
                
                if (!drawn) {
                    ctx.moveTo(canvasX, canvasY);
                    drawn = true;
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            
            ctx.stroke();
            
            // Draw points along the curve for visual effect
            if (animationProgress >= 1) {
                for (let angle = 0; angle <= 2 * Math.PI; angle += Math.PI / 12) {
                    const x = 16 * Math.pow(Math.sin(angle), 3);
                    const y = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle));
                    
                    const canvasX = centerX + x * scale;
                    const canvasY = centerY + y * scale - 20;
                    
                    ctx.beginPath();
                    ctx.arc(canvasX, canvasY, 3, 0, 2 * Math.PI);
                    ctx.fillStyle = '#ff4d6d';
                    ctx.fill();
                }
            }
            
            // Animate the drawing
            if (animationProgress < 1) {
                animationProgress += 0.01;
            }
            
            t += 0.02;
            requestAnimationFrame(drawHeart);
        }

        drawHeart();

        function denied() {
            alert(errorMessages[noClickCount % errorMessages.length]);
            noBtn.innerText = "Invalid ‚ùå";
            let currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
            yesBtn.style.fontSize = (currentSize + 15) + "px";
            yesBtn.style.padding = (parseFloat(window.getComputedStyle(yesBtn).padding) + 10) + "px";
            noClickCount++;
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('confetti');
            heart.innerText = ['üíñ', 'üíó', 'üíì', 'üíï', 'üê∂'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.animationDuration = (Math.random() * 2 + 3) + "s";
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }

        function createFlower() {
            const positions = [15, 30, 70, 85];
            positions.forEach((pos, index) => {
                setTimeout(() => {
                    const flower = document.createElement('div');
                    flower.className = 'flower';
                    flower.style.left = pos + '%';
                    
                    const stem = document.createElement('div');
                    stem.className = 'stem';
                    
                    const flowerHead = document.createElement('div');
                    flowerHead.className = 'flower-head';
                    
                    for (let i = 0; i < 5; i++) {
                        const petal = document.createElement('div');
                        petal.className = 'petal';
                        flowerHead.appendChild(petal);
                    }
                    
                    const center = document.createElement('div');
                    center.className = 'center';
                    flowerHead.appendChild(center);
                    
                    const leafLeft = document.createElement('div');
                    leafLeft.className = 'leaf leaf-left';
                    leafLeft.style.top = '60px';
                    stem.appendChild(leafLeft);
                    
                    const leafRight = document.createElement('div');
                    leafRight.className = 'leaf leaf-right';
                    leafRight.style.top = '90px';
                    stem.appendChild(leafRight);
                    
                    flower.appendChild(stem);
                    flower.appendChild(flowerHead);
                    document.body.appendChild(flower);
                }, index * 500);
            });
        }

        function accepted() {
            // Updated calendar details for dinner at Jean's place
            const eventTitle = encodeURIComponent("Valentine's Dinner at Jean's");
            const eventDetails = encodeURIComponent("Menu: Pasta & Wine üçùüç∑\nEvening Plans: S'mores & relaxing! üî•");
            const calendarLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${eventTitle}&dates=20260214T233000Z/20260215T030000Z&details=${eventDetails}&location=Jean's+Place`;
            
            document.getElementById('valentineCard').innerHTML = `
                <div style="font-size: 60px;">üçùüç∑‚ú®</div>
                <h1 style="color: #ff4d6d;">It's a Date, Halle!</h1>
                <a href="${calendarLink}" target="_blank" class="calendar-btn">üìÖ Add Dinner to Calendar</a>
                
                <div class="love-message">
                    <div class="message-title">"Every day with you is my favorite adventure"</div>
                    This means that life with you isn't just a routine, but a constant journey full of discovery and joy. It implies that no matter where we are or what we are doing, whether we're out on a trip or just relaxing at home, being by your side is what makes the experience meaningful. It frames our relationship as an ongoing story where the best parts are the moments we share together, making even the simplest days feel like a special destination.
                </div>
                
                <div style="font-size: 12px; margin-top: 20px; color: #ffb3c1;">From Jean Cadet</div>
            `;
            document.body.style.backgroundColor = "#ffc1cf";
            setInterval(createHeart, 150);
            createFlower(); // Trigger flower animation
        }

        setInterval(() => {
            const bh = document.createElement('div');
            bh.classList.add('bg-heart');
            bh.innerHTML = '‚ù§Ô∏è';
            bh.style.left = Math.random() * 100 + 'vw';
            bh.style.bottom = '-5vh';
            bh.style.fontSize = (Math.random() * 20 + 10) + 'px';
            document.body.appendChild(bh);
            setTimeout(() => bh.remove(), 6000);
        }, 500);
    </script>
</body>
</html>
