<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Halle ‚ù§Ô∏è</title>
    <style>
        body {
            background-color: #fff0f5;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            overflow: hidden;
        }

        .card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            border: 4px solid #ff85a2;
            box-shadow: 0 10px 25px rgba(255, 133, 162, 0.3);
            z-index: 10;
            position: relative;
            max-width: 600px;
        }

        .bg-heart {
            position: absolute;
            color: rgba(255, 182, 193, 0.4);
            font-size: 20px;
            z-index: 1;
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        h1 { color: #ff4d6d; font-size: 2.2rem; }
        p { color: #ff758f; font-weight: bold; }

        .btn-group {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        button {
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        #yesBtn { background-color: #ff4d6d; color: white; }
        #noBtn { background-color: #ffb3c1; color: white; }

        .confetti {
            position: absolute;
            top: -50px;
            font-size: 24px;
            animation: fall linear forwards;
            user-select: none;
        }

        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }

        .calendar-btn {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 24px;
            background-color: #ff4d6d;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(255, 77, 109, 0.3);
        }

        .love-message {
            margin-top: 25px;
            padding: 20px;
            background-color: #ffe6f0;
            border-radius: 15px;
            border: 2px solid #ffb3c1;
            color: #ff4d6d;
            font-size: 0.95rem;
            line-height: 1.6;
            text-align: left;
        }

        .message-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            text-align: center;
            color: #ff4d6d;
        }

        /* Particle Heart Canvas */
        #particleCanvas {
            margin: 20px auto;
            display: block;
        }

        .love-text {
            font-size: 1.5rem;
            color: #ff4d6d;
            font-weight: bold;
            margin-top: 10px;
            opacity: 0;
            animation: fadeIn 1s ease-in 4s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Improved Flower Animation */
        .flower {
            position: absolute;
            bottom: 0;
            z-index: 5;
        }

        .stem {
            width: 6px;
            background: linear-gradient(to top, #2d5016, #4a7c23, #6faa3e);
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            height: 0;
            border-radius: 3px;
            animation: growStem 2s ease-out forwards;
        }

        .flower-bloom {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            animation: moveUp 2s ease-out forwards;
        }

        .petal {
            position: absolute;
            width: 35px;
            height: 45px;
            background: radial-gradient(ellipse at 30% 30%, #ffb3d9, #ff85a2);
            border-radius: 50% 50% 50% 0%;
            box-shadow: inset -2px -2px 5px rgba(255, 77, 109, 0.3);
            transform-origin: bottom right;
            animation: petalBloom 0.6s ease-out forwards;
            opacity: 0;
        }

        .petal:nth-child(1) { 
            transform: rotate(-90deg) translateX(-17px) translateY(17px);
            animation-delay: 2s;
        }
        .petal:nth-child(2) { 
            transform: rotate(-18deg) translateX(-17px) translateY(17px);
            animation-delay: 2.1s;
        }
        .petal:nth-child(3) { 
            transform: rotate(54deg) translateX(-17px) translateY(17px);
            animation-delay: 2.2s;
        }
        .petal:nth-child(4) { 
            transform: rotate(126deg) translateX(-17px) translateY(17px);
            animation-delay: 2.3s;
        }
        .petal:nth-child(5) { 
            transform: rotate(198deg) translateX(-17px) translateY(17px);
            animation-delay: 2.4s;
        }

        .flower-center {
            position: absolute;
            width: 28px;
            height: 28px;
            background: radial-gradient(circle at 40% 40%, #FFE135, #FFC700, #FF8C00);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            box-shadow: 0 2px 8px rgba(255, 140, 0, 0.4);
            animation: centerBloom 0.4s ease-out 2.5s forwards;
        }

        .flower-center::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 60% 60%, transparent 40%, rgba(139, 69, 19, 0.2) 60%);
            border-radius: 50%;
        }

        .leaf {
            position: absolute;
            width: 30px;
            height: 18px;
            background: linear-gradient(135deg, #6faa3e 0%, #4a7c23 100%);
            border-radius: 0 80% 80% 0;
            opacity: 0;
            box-shadow: inset -1px -1px 3px rgba(0, 0, 0, 0.2);
        }

        .leaf-left {
            left: -18px;
            top: 70px;
            animation: leafGrow 0.6s ease-out 1.2s forwards;
            transform-origin: right center;
        }

        .leaf-right {
            right: -18px;
            top: 100px;
            animation: leafGrow 0.6s ease-out 1.4s forwards;
            transform-origin: left center;
            transform: scaleX(-1);
        }

        @keyframes growStem {
            from { height: 0; }
            to { height: 180px; }
        }

        @keyframes moveUp {
            from { bottom: 0; }
            to { bottom: 180px; }
        }

        @keyframes petalBloom {
            from { 
                opacity: 0;
                transform: rotate(var(--rotation, 0deg)) translateX(-17px) translateY(17px) scale(0);
            }
            to { 
                opacity: 1;
                transform: rotate(var(--rotation, 0deg)) translateX(-17px) translateY(17px) scale(1);
            }
        }

        @keyframes centerBloom {
            from { transform: translate(-50%, -50%) scale(0); }
            to { transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes leafGrow {
            from { 
                opacity: 0;
                transform: scaleX(0) rotate(-10deg);
            }
            to { 
                opacity: 1;
                transform: scaleX(1) rotate(0deg);
            }
        }
    </style>
</head>
<body>

    <div class="card" id="valentineCard">
        <h1>Halle, will you be my Valentine?</h1>
        <canvas id="particleCanvas" width="400" height="280"></canvas>
        <div class="love-text" id="loveText">I love you Halle ‚ù§Ô∏è</div>
        <div class="btn-group">
            <button id="yesBtn" onclick="accepted()">YES</button>
            <button id="noBtn" onclick="denied()">NO</button>
        </div>
    </div>

    <script>
        let noClickCount = 0;
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        
        const errorMessages = [
            "Halle, error 404: 'No' not found.",
            "Invalid selection. Please try again.",
            "System Overload: Only 'Yes' is supported.",
            "Critical Error: Clicking 'No' is physically impossible.",
            "Access Denied. Did you mean to click 'Yes'?"
        ];

        // Particle Heart Animation
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        const particles = [];
        const heartPositions = [];
        
        // Generate heart shape positions
        for (let t = 0; t < 2 * Math.PI; t += 0.05) {
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            heartPositions.push({
                x: canvas.width / 2 + x * 8,
                y: canvas.height / 2 + y * 8 - 20
            });
        }

        class Particle {
            constructor(targetX, targetY, delay) {
                this.x = canvas.width / 2 + (Math.random() - 0.5) * 100;
                this.startY = canvas.height + 20;
                this.y = this.startY;
                this.targetX = targetX;
                this.targetY = targetY;
                this.size = Math.random() * 3 + 2;
                this.delay = delay;
                this.elapsed = 0;
                this.duration = 2000 + Math.random() * 1000;
                this.color = `hsl(${330 + Math.random() * 30}, 100%, ${60 + Math.random() * 20}%)`;
            }

            update(deltaTime) {
                if (this.elapsed < this.delay) {
                    this.elapsed += deltaTime;
                    return;
                }

                const progress = Math.min((this.elapsed - this.delay) / this.duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                
                this.y = this.startY + (this.targetY - this.startY) * easeProgress;
                this.x = this.x + (this.targetX - this.x) * easeProgress * 0.1;
                
                this.elapsed += deltaTime;
            }

            draw() {
                if (this.elapsed < this.delay) return;
                
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                
                // Glow effect
                ctx.shadowBlur = 10;
                ctx.shadowColor = this.color;
                ctx.fill();
                ctx.shadowBlur = 0;
            }
        }

        // Create particles
        heartPositions.forEach((pos, i) => {
            particles.push(new Particle(pos.x, pos.y, i * 10));
        });

        let lastTime = Date.now();

        function animateParticles() {
            const currentTime = Date.now();
            const deltaTime = currentTime - lastTime;
            lastTime = currentTime;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                particle.update(deltaTime);
                particle.draw();
            });

            requestAnimationFrame(animateParticles);
        }

        animateParticles();

        function denied() {
            alert(errorMessages[noClickCount % errorMessages.length]);
            noBtn.innerText = "Invalid ‚ùå";
            let currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
            yesBtn.style.fontSize = (currentSize + 15) + "px";
            yesBtn.style.padding = (parseFloat(window.getComputedStyle(yesBtn).padding) + 10) + "px";
            noClickCount++;
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('confetti');
            heart.innerText = ['üíñ', 'üíó', 'üíì', 'üíï', 'üê∂'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.animationDuration = (Math.random() * 2 + 3) + "s";
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }

        function createFlower() {
            const positions = [10, 25, 50, 75, 90];
            positions.forEach((pos, index) => {
                setTimeout(() => {
                    const flower = document.createElement('div');
                    flower.className = 'flower';
                    flower.style.left = pos + '%';
                    
                    const stem = document.createElement('div');
                    stem.className = 'stem';
                    
                    const flowerBloom = document.createElement('div');
                    flowerBloom.className = 'flower-bloom';
                    
                    // Create 5 petals
                    for (let i = 0; i < 5; i++) {
                        const petal = document.createElement('div');
                        petal.className = 'petal';
                        flowerBloom.appendChild(petal);
                    }
                    
                    const center = document.createElement('div');
                    center.className = 'flower-center';
                    flowerBloom.appendChild(center);
                    
                    const leafLeft = document.createElement('div');
                    leafLeft.className = 'leaf leaf-left';
                    stem.appendChild(leafLeft);
                    
                    const leafRight = document.createElement('div');
                    leafRight.className = 'leaf leaf-right';
                    stem.appendChild(leafRight);
                    
                    flower.appendChild(stem);
                    flower.appendChild(flowerBloom);
                    document.body.appendChild(flower);
                }, index * 400);
            });
        }

        function accepted() {
            const eventTitle = encodeURIComponent("Valentine's Dinner at Jean's");
            const eventDetails = encodeURIComponent("Menu: Pasta & Wine üçùüç∑\nEvening Plans: S'mores & relaxing! üî•");
            const calendarLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${eventTitle}&dates=20260214T233000Z/20260215T030000Z&details=${eventDetails}&location=Jean's+Place`;
            
            document.getElementById('valentineCard').innerHTML = `
                <div style="font-size: 60px;">üçùüç∑‚ú®</div>
                <h1 style="color: #ff4d6d;">It's a Date, Halle!</h1>
                <a href="${calendarLink}" target="_blank" class="calendar-btn">üìÖ Add Dinner to Calendar</a>
                
                <div class="love-message">
                    <div class="message-title">"Every day with you is my favorite adventure"</div>
                    This means that life with you isn't just a routine, but a constant journey full of discovery and joy. It implies that no matter where we are or what we are doing, whether we're out on a trip or just relaxing at home, being by your side is what makes the experience meaningful. It frames our relationship as an ongoing story where the best parts are the moments we share together, making even the simplest days feel like a special destination.
                </div>
                
                <div style="font-size: 12px; margin-top: 20px; color: #ffb3c1;">From Jean Cadet</div>
            `;
            document.body.style.backgroundColor = "#ffc1cf";
            setInterval(createHeart, 150);
            createFlower();
        }

        setInterval(() => {
            const bh = document.createElement('div');
            bh.classList.add('bg-heart');
            bh.innerHTML = '‚ù§Ô∏è';
            bh.style.left = Math.random() * 100 + 'vw';
            bh.style.bottom = '-5vh';
            bh.style.fontSize = (Math.random() * 20 + 10) + 'px';
            document.body.appendChild(bh);
            setTimeout(() => bh.remove(), 6000);
        }, 500);
    </script>
</body>
</html>
